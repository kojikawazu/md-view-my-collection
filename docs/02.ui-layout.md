# 最新UIレイアウト要求（base準拠）

※ `docs/01.pre-requirements.md` は読み取り専用。以降の要求反映は本書に追記/更新する。

## 概要
- `base/` の画面実装が最新のレイアウト定義。
- 対象は「Markdownレポート閲覧・管理UI」。
- 画面は一覧 / 詳細 / 新規作成 / 編集 / ログイン / Markdown Style Lab で構成される。

## グローバルレイアウト
- ヘッダー＋サイドバー＋メイン＋フッターの2カラム構成。
- ヘッダーは固定表示（sticky）で、未ログイン時はログインボタン、ログイン時は「New Post」「Markdown Lab」とユーザー情報＋Logoutを表示。
- サイドバーはPC表示のみ（`md`以上）でカテゴリとタグ一覧、Director's Manifestoを表示。
  - カテゴリは固定リスト（Development / AI / Cloud / Linux / Container / Application / Program / Hobby）。
- ログイン画面のみ、ヘッダー/サイドバー/フッターを非表示で全画面センタリング。

## 画面: 一覧（/）
- 画面上部にタイトル「Latest Reports」を表示（説明文は無し）。
- レポートは2カラムカード（`lg`以上）で表示。
  - カテゴリバッジ、日付、タイトル、要約、著者名を含む。
  - 「Read Report →」リンクで詳細へ遷移。
- 一覧のレポート表示は1ページ10件。
- ページャーは「前へ」「次へ」とページ番号を表示し、ページ番号ボタンは最大5個まで表示する。
- フィルタ適用中は、現在のカテゴリ/タグとクリアボタンを表示する。
- レポートが0件の場合は「No reports found.」を中央表示。
- サイドバーのカテゴリ/タグをクリックすると一覧をフィルター（再クリックで解除）。
- 一覧へ戻るとカテゴリ/タグフィルターはリセットされる。

## 画面: 詳細（/report/:id）
- パンくず的な「All Reports」リンクとカテゴリバッジを表示。
- タイトル、著者名、日付を表示。
- ログイン時のみ「編集」「削除」アクションを表示。
- 本文はMarkdownをサニタイズして表示（見出し/リスト/改行など）。
- タグはフッター領域でチップ表示。
- 削除は確認モーダルを挟む。

## 画面: 新規作成・編集（/report/new, /report/:id/edit）
- フォーム項目
  - タイトル、カテゴリー、タグ（カンマ区切り）、要約、本文（Markdown）
- 送信前に確認モーダルを表示。
- 未ログイン時はログイン画面へリダイレクト。

## 画面: Markdown Style Lab（/report/markdown-lab）
- Markdown表示デザインの調整用検証画面（Pattern 07を基準）。
- 表示内容は詳細画面のMarkdown描画と同じスタイルを利用する。
- 未ログイン時はログイン画面へリダイレクト（認証後のみアクセス可）。

## 画面: ログイン（/login）
- ローカル認証時はメール/パスワード入力、Authenticateボタン。
- OAuth時はGoogleログインボタンのみ。
- 管理者メールは環境変数（`ADMIN_EMAIL`）の一致のみ許可。
- 失敗時はエラーメッセージを表示。
- 文言は日本語中心、コンポーネントはカード中央配置。

## UIトーン/スタイル
- 深いブラウン系のハイコントラストデザイン。
- 見出しは太字・大きめ、本文は落ち着いた書体。
- ボタンは太字・大文字・間隔広めのラベル。

## データ/状態（現行の挙動）
- E2E/ローカル動作時は `localStorage` を使用。
- 本番はSupabaseデータを表示し、初期ダミーデータは表示しない。

## ルーティング
- `/` 一覧
- `/report/:id` 詳細
- `/report/new` 新規作成
- `/report/:id/edit` 編集
- `/report/markdown-lab` Markdownデザイン検証（認証必須）
- `/login` ログイン

## 差分（01.pre-requirements.md → 最新UI）
- アーキテクチャ想定（Next.js/TS/TailwindCSS/Supabase）に沿ってApp Routerで実装。
- レポート閲覧中心の要件は維持しつつ、ログイン/投稿/編集/削除までのUIをフロントで具現化。
- Markdown表示は `react-markdown` + `remark-gfm` + `rehype-sanitize` で安全に表示。
- 公開範囲/権限（public/auth/admin）は将来想定だが、現状はログイン有無のみで制御。
- 画面構成は一覧/詳細/投稿/編集/ログイン/Markdown Style Labの6画面に確定。
